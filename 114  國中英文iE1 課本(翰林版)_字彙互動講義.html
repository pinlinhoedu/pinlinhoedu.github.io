<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1: Who's That Handsome Boy? äº’å‹•å­—å½™è¬›ç¾©</title>
    <style>
        :root {
            --bg-main: #f4f3ee;
            --bg-vocab-section: #dde3e7;
            --bg-exercise-section: #e3e7dd;
            --card-front-n: #b4c6d2;
            --card-front-adj: #e0c8b3;
            --card-back: #ffffff;
            --text-primary: #3d405b;
            --text-secondary: #5e6472;
            --highlight-color: #d68c45;
            --correct-color: #73a580;
            --incorrect-color: #c27c78;
            --tag-n-bg: #6A8EAE;
            --tag-adj-bg: #D8A373;
            --tag-text: #ffffff;
            --border-color: #ccc;
            --button-bg: #8a9a8b;
            --button-hover-bg: #738374;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
        }

        header {
            text-align: center;
            padding: 2rem 1rem;
            background-color: var(--card-back);
        }

        h1 {
            font-size: 2.5rem;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--highlight-color);
            padding-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        main {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-block {
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
        }

        #vocabulary-section {
            background-color: var(--bg-vocab-section);
        }

        #exercises-section {
            background-color: var(--bg-exercise-section);
        }

        /* Flashcards Grid */
        #flashcards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .card-container {
            perspective: 1000px;
            height: 420px;
            cursor: pointer;
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 12px;
        }

        .card-container.is-flipped .card {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .card-front {
            background-color: var(--card-front-n);
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            font-weight: bold;
            text-align: center;
            padding: 1rem;
        }
        .card-front.adj {
            background-color: var(--card-front-adj);
        }
        
        .card-front::after {
            content: 'â†º';
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 1.5rem;
            color: rgba(0,0,0,0.3);
        }

        .card-back {
            background-color: var(--card-back);
            transform: rotateY(180deg);
            padding: 1.5rem;
            font-size: 0.9rem;
            overflow-y: auto;
        }
        
        .card-back::-webkit-scrollbar {
            width: 8px;
        }
        .card-back::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .card-back::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        .card-back::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }

        .card-back-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.75rem;
        }
        
        .card-back-header h4 {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .card-back-item {
            margin-bottom: 0.8rem;
        }

        .card-back-item strong {
            display: block;
            color: var(--text-secondary);
            font-weight: bold;
            margin-bottom: 0.2rem;
        }
        
        .card-back-item ul {
            list-style-position: inside;
            padding-left: 0;
        }
        
        .card-back-item li {
             margin-bottom: 0.25rem;
        }

        .highlight {
            color: var(--highlight-color);
            font-weight: bold;
        }

        .tag {
            display: inline-block;
            color: var(--tag-text);
            border-radius: 4px;
            padding: 3px 8px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        .tag-n { background-color: var(--tag-n-bg); }
        .tag-adj { background-color: var(--tag-adj-bg); }

        .speaker-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            display: inline-flex;
            align-items: center;
            vertical-align: middle;
            margin-left: 0.5rem;
        }
        
        .speaker-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
            transition: fill 0.2s;
        }

        .speaker-btn:hover svg {
            fill: var(--text-primary);
        }

        /* Accordion for extra info */
        .accordion-toggle {
            background-color: #f0f0f0;
            border: none;
            width: 100%;
            text-align: left;
            padding: 0.5rem 0.8rem;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            margin-top: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .accordion-toggle:hover {
            background-color: #e0e0e0;
        }

        .accordion-toggle::after {
            content: '+';
            font-size: 1.5rem;
            font-weight: 300;
            transition: transform 0.3s ease-out;
        }

        .accordion-toggle.active::after {
            transform: rotate(45deg);
        }

        .accordion-content {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.3s ease-out;
        }
        
        .accordion-content.active {
            grid-template-rows: 1fr;
        }
        
        .accordion-content > div {
            overflow: hidden;
        }

        .accordion-inner-content {
            padding: 0.8rem;
            background-color: #fafafa;
            border: 1px solid #f0f0f0;
            border-top: none;
            border-radius: 0 0 6px 6px;
        }

        /* Exercises */
        .exercise {
            background-color: var(--card-back);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .exercise-controls {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
        }

        .exercise-controls button {
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s;
        }

        .exercise-controls button:hover {
            background-color: var(--button-hover-bg);
        }

        /* Drag and Drop Exercise */
        .diary-text {
            background-color: #fcf8e3;
            padding: 1rem;
            border-radius: 6px;
            line-height: 2.5;
            font-style: italic;
        }

        .drop-zone {
            display: inline-block;
            background-color: #fff;
            border: 2px dashed var(--border-color);
            min-width: 100px;
            height: 32px;
            vertical-align: middle;
            border-radius: 4px;
            padding: 2px 4px;
            transition: all 0.2s;
        }
        
        .drop-zone.drag-over {
            border-style: solid;
            border-color: var(--highlight-color);
            background-color: #feffde;
        }

        .drop-zone.correct {
            border-color: var(--correct-color);
            border-style: solid;
        }

        .drop-zone.incorrect {
            border-color: var(--incorrect-color);
            border-style: solid;
        }

        .word-bank {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f0f0f0;
            border-radius: 6px;
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }
        
        .draggable-word {
            padding: 0.4rem 0.8rem;
            background-color: var(--card-front-n);
            color: var(--text-primary);
            border-radius: 4px;
            cursor: grab;
            user-select: none;
            transition: opacity 0.2s;
        }

        .draggable-word.dragging {
            opacity: 0.5;
        }
        
        /* Matching Game */
        #matching-game p {
            margin-bottom: 1rem;
        }
        
        .matching-container {
            display: flex;
            gap: 1.5rem;
        }
        
        .match-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .match-item {
            padding: 0.8rem;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .match-item:hover {
            border-color: var(--highlight-color);
            background-color: #fffcf5;
        }

        .match-item.selected {
            border-color: var(--highlight-color);
            background-color: #fff8e1;
            transform: scale(1.02);
        }
        
        .match-item.matched {
            border-color: var(--correct-color);
            background-color: #e8f5e9;
            color: #2e7d32;
            cursor: default;
            opacity: 0.7;
            pointer-events: none;
        }
        
        .match-item.incorrect-flash {
            border-color: var(--incorrect-color);
            background-color: #ffcdd2;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #match-feedback {
            margin-top: 1rem;
            font-weight: bold;
            min-height: 1.6em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
            .content-block { padding: 1rem; }
            .matching-container { flex-direction: column; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Unit 1: Who's That Handsome Boy?</h1>
        <p>æ·±åº¦å­—å½™è¬›ç¾©</p>
    </header>

    <main>
        <section class="content-block" id="vocabulary-section">
            <h2>I. å–®å­—æ·±åº¦è§£æ (é»æ“Šå¡ç‰‡ç¿»é¢)</h2>
            <div id="flashcards-container">
                <!-- Flashcards will be dynamically generated by JavaScript -->
            </div>
        </section>

        <section class="content-block" id="exercises-section">
            <h2>II. äº’å‹•ç·´ç¿’é¡Œ</h2>
            
            <div class="exercise" id="drag-drop-exercise">
                <h3>ã€Œå­—å½™æ··åˆã€æ‹–æ›³å¡«ç©º</h3>
                <p>æƒ…å¢ƒï¼šJamie æ­£åœ¨å¯«ä¸€ç¯‡æ—¥è¨˜ï¼Œä»‹ç´¹å¥¹çš„æ–°æœ‹å‹ Zac å’Œä»–çš„å®¶äººã€‚è«‹å¾ä¸‹é¢çš„å–®å­—åº«ä¸­æ‹–æ›³æœ€é©åˆçš„å­—åˆ°ç©ºæ ¼ä¸­ã€‚</p>
                <div class="diary-text">
                    Hi Diary,<br>
                    Today was a great day! A new boy, Zac, is now my <span class="drop-zone" data-answer="classmate" data-id="3"></span>. He is very tall and <span class="drop-zone" data-answer="handsome" data-id="4"></span>. After school, I met his sister, Sophie. She is a nurse. I also met his <span class="drop-zone" data-answer="cousin" data-id="5"></span>, Max, who is a doctor. Zac has a very nice <span class="drop-zone" data-answer="family" data-id="6"></span>.
                </div>
                <div class="word-bank" id="word-bank">
                    <!-- Draggable words will be generated by JavaScript -->
                </div>
                <div class="exercise-controls">
                    <button id="check-drag-drop">æª¢æŸ¥ç­”æ¡ˆ</button>
                    <button id="reset-drag-drop">é‡ç½®</button>
                </div>
                 <p id="drag-drop-feedback" class="feedback"></p>
            </div>

            <div class="exercise" id="matching-game">
                <h3>å–®å­—é…å°éŠæˆ²</h3>
                <p>è«‹é»æ“Šå·¦é‚Šçš„è‹±æ–‡å–®å­—ï¼Œå†é»æ“Šå³é‚Šå°æ‡‰çš„ä¸­æ–‡æ„æ€ä¾†é€²è¡Œé…å°ã€‚</p>
                <div class="matching-container">
                    <div class="match-column" id="match-words">
                        <!-- English words will be generated here -->
                    </div>
                    <div class="match-column" id="match-defs">
                        <!-- Chinese definitions will be generated here -->
                    </div>
                </div>
                 <p id="match-feedback" class="feedback"></p>
            </div>

        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const vocabularyData = [
            // A. Occupations & Roles
            { id: 'office-worker', word: 'office worker', type: 'n.', type_full: 'åè©ç‰‡èª', phonetic: '[`É”fÉªs `wÉkÉš]', chinese: 'ä¸Šç­æ—ï¼›è¾¦å…¬å®¤è·å“¡', usage: 'é€™æ˜¯ä¸€å€‹è¤‡åˆåè©ï¼Œç”± `office` (è¾¦å…¬å®¤) å’Œ `worker` (å·¥ä½œè€…) çµ„æˆã€‚æŒ‡çš„æ˜¯åœ¨è¾¦å…¬å®¤è£¡è™•ç†æ–‡æ›¸ã€è¡Œæ”¿ç­‰å·¥ä½œçš„è·å“¡ã€‚', collocations: ['a busy **office worker** (ä¸€ä½å¿™ç¢Œçš„ä¸Šç­æ—)', 'become an **office worker** (æˆç‚ºä¸€åä¸Šç­æ—)'], sentences: ['My mom is an **office worker**; she works from 9 to 5 every day.', 'Many **office workers** in this city take the MRT to work.'], confusion: { title: 'officer', text: '[`É”fÉ™sÉš`] (n.) å®˜å“¡ï¼›è­¦å®˜ã€‚é›–ç„¶éƒ½æœ‰ office çš„å½±å­ï¼Œä½† `officer` é€šå¸¸æŒ‡æœ‰ç‰¹å®šè·ä½æˆ–æ¬ŠåŠ›çš„äººï¼Œå¦‚ a police **officer** (è­¦å®˜)ã€‚`office worker` å‰‡æ³›æŒ‡ä¸€èˆ¬è¾¦å…¬å®¤è·å“¡ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: 'åœ¨å£èªä¸­ï¼Œæœ‰æ™‚äººå€‘æœƒç”¨ "a nine-to-fiver" ä¾†å½¢å®¹ä¸Šç­æ—ï¼ŒæŒ‡é‚£äº›éè‘—æœä¹æ™šäº”è¦å¾‹ç”Ÿæ´»çš„äººã€‚' }},
            { id: 'cook', word: 'cook', type: 'n.', type_full: 'åè©', phonetic: '[kÊŠk]', chinese: 'å»šå¸«', usage: 'æŒ‡çš„æ˜¯çƒ¹é£ªé£Ÿç‰©çš„è·æ¥­ã€‚æ³¨æ„ï¼Œ`cook` ä¹Ÿå¯ä»¥ç•¶å‹•è© (v.)ï¼Œæ„æ€æ˜¯ã€Œçƒ¹ç…®ã€ã€‚', collocations: ['a great **cook** (ä¸€ä½å¾ˆæ£’çš„å»šå¸«)', 'work as a **cook** (æ“”ä»»å»šå¸«å·¥ä½œ)'], sentences: ['My uncle is a **cook** in a famous restaurant.', 'Who is the **cook** in your family? (ä½ å®¶æ˜¯èª°è² è²¬åšé£¯çš„ï¼Ÿ)'], confusion: { title: 'cooker', text: '[`kÊŠkÉš] (n.) ç‚Šå…·ã€‚åƒè¬è¦å°å¿ƒï¼`-er` çµå°¾çš„å­—é€šå¸¸æŒ‡ã€Œäººã€ï¼Œä½†é€™è£¡ `cooker` æŒ‡çš„æ˜¯ã€Œç”¨ä¾†ç…®æ±è¥¿çš„å™¨å…·ã€ï¼Œä¾‹å¦‚ a rice **cooker** (é›»é‹)ã€‚å»šå¸«æ˜¯ `cook`ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: 'å°ˆæ¥­ç­‰ç´šæ›´é«˜ã€é€šå¸¸åœ¨é«˜ç´šé¤å»³å·¥ä½œçš„ä¸»å»šï¼Œè‹±æ–‡æ˜¯ `chef` [ÊƒÉ›f]ã€‚' }},
            { id: 'doctor', word: 'doctor', type: 'n.', type_full: 'åè©', phonetic: '[`dÉ‘ktÉš]', chinese: 'é†«ç”Ÿ', usage: 'æ³›æŒ‡æ‰€æœ‰é¡å‹çš„é†«ç”Ÿã€‚çœ‹é†«ç”Ÿå¯ä»¥èªª `see a doctor`ã€‚', collocations: ['see a **doctor** (çœ‹é†«ç”Ÿ)', 'family **doctor** (å®¶åº­é†«ç”Ÿ)'], sentences: ["If you feel sick, you should go see a **doctor**.", "Jamie's cousin, Max, is a **doctor**."], confusion: { title: 'nurse', text: '[nÉs] (n.) è­·ç†å¸«ã€‚**Doctor** è² è²¬è¨ºæ–·èˆ‡æ²»ç™‚ï¼Œè€Œ **nurse** è² è²¬ç…§è­·ç—…äººï¼Œä»–å€‘æ˜¯åœ¨é†«ç™‚é«”ç³»ä¸­å¯†åˆ‡åˆä½œçš„å¤¥ä¼´ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '`Doctor` çš„ç¸®å¯«æ˜¯ `Dr.`ï¼Œç”¨åœ¨å§“æ°å‰é¢ï¼Œä¾‹å¦‚ `Dr. Lin` (æ—é†«å¸«)ã€‚' }},
            { id: 'student', word: 'student', type: 'n.', type_full: 'åè©', phonetic: '[`studnt]', chinese: 'å­¸ç”Ÿ', usage: 'æ³›æŒ‡æ‰€æœ‰åœ¨å­¸çš„å­¸ç”Ÿã€‚', collocations: ['a high school **student** (é«˜ä¸­ç”Ÿ)', 'a good **student** (ä¸€ä½å¥½å­¸ç”Ÿ)'], sentences: ['I am a junior high school **student**.', 'The teacher asked the **students** to open their books.'], confusion: { title: 'study', text: '[`stÊŒdÉª] (v.) å­¸ç¿’ï¼›ç ”è®€ã€‚**Student** æ˜¯ã€Œåš study é€™å€‹å‹•ä½œçš„äººã€ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '`Student` é€™å€‹å­—ä¾†è‡ªæ‹‰ä¸æ–‡çš„ `studere`ï¼Œæ„æ€æ˜¯ã€Œç†±è¡·æ–¼ã€åŠªåŠ›ã€ã€‚æ‰€ä»¥ï¼Œèº«ç‚ºä¸€å€‹ `student`ï¼Œæœ€é‡è¦çš„ç‰¹è³ªå°±æ˜¯å°å­¸ç¿’çš„ç†±æƒ…å–”ï¼' }},
            { id: 'classmate', word: 'classmate', type: 'n.', type_full: 'åè©', phonetic: '[`klÃ¦sÍµmet]', chinese: 'åŒå­¸', usage: 'ç”± `class` (ç­ç´š) å’Œ `mate` (å¤¥ä¼´) çµ„æˆï¼ŒæŒ‡åœ¨åŒä¸€å€‹ç­ç´šä¸Šèª²çš„åŒå­¸ã€‚', collocations: ['my new **classmate** (æˆ‘çš„æ–°åŒå­¸)', 'help a **classmate** (å¹«åŠ©ä¸€ä½åŒå­¸)'], sentences: ["Zac is Yuki and Jamie's new **classmate**.", 'I often discuss homework with my **classmates**.'], confusion: { title: 'roommate', text: '[`rumÍµmet] (n.) å®¤å‹ã€‚`mate` é€™å€‹å­—æ ¹å¾ˆå¥½ç”¨ï¼Œ`class` + `mate` æ˜¯åŒå­¸ï¼Œ`room` + `mate` å°±æ˜¯ä½åœ¨åŒä¸€å€‹æˆ¿é–“çš„å¤¥ä¼´â€”â€”å®¤å‹ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: 'åœ¨è‹±å¼è‹±èªä¸­ï¼Œ`mate` ä¹Ÿå¯ä»¥å–®ç¨ç”¨ä¾†ç¨±å‘¼æœ‹å‹ï¼Œé¡ä¼¼æ–¼ç¾å¼è‹±èªä¸­çš„ `buddy` æˆ– `pal`ã€‚' }},
            // B. Adjectives
            { id: 'handsome', word: 'handsome', type: 'adj.', type_full: 'å½¢å®¹è©', phonetic: '[`hÃ¦nsÉ™m]', chinese: 'è‹±ä¿Šçš„', usage: 'é€™å€‹å­—**å°ˆé–€ç”¨ä¾†å½¢å®¹ç”·ç”Ÿæˆ–ç”·æ€§çš„å¤–è²Œå¥½çœ‹**ã€‚å½¢å®¹å¥³ç”Ÿæˆ–äº‹ç‰©å‰‡å¸¸ç”¨ `beautiful`ã€‚', collocations: ['a **handsome** boy/man (ä¸€å€‹è‹±ä¿Šçš„ç”·å­©/ç”·äºº)', 'look **handsome** (çœ‹èµ·ä¾†å¾ˆå¸¥)'], sentences: ['Look at that **handsome** boy. Who is he?', 'My dad looks very **handsome** in a suit.'], confusion: { title: 'handy', text: '[`hÃ¦ndÉª] (adj.) æ‰‹é‚Šçš„ï¼›æ–¹ä¾¿çš„ã€‚`handsome` è£¡é¢é›–ç„¶æœ‰ `hand`ï¼Œä½†æ„æ€è·Ÿæ‰‹ä¸€é»é—œä¿‚éƒ½æ²’æœ‰ï¼`handy` æ‰æ˜¯è·Ÿã€Œæ‰‹é‚Šã€æ–¹ä¾¿ã€æœ‰é—œçš„å­—ï¼Œä¾‹å¦‚ a **handy** tool (ä¸€å€‹æ–¹ä¾¿çš„å·¥å…·)ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: 'ä½ çŸ¥é“å—ï¼Ÿ`handsome` é€™å€‹å­—é™¤äº†å½¢å®¹äººï¼Œæœ‰æ™‚å€™ä¹Ÿå¯ä»¥å½¢å®¹ã€Œæ•¸é‡å¯è§€çš„ã€å„ªæ¸¥çš„ã€ï¼Œä¾‹å¦‚ `a handsome profit` (ä¸€ç­†å¯è§€çš„åˆ©æ½¤)ã€‚ä¸éåœ¨åœ‹ä¸­éšæ®µï¼Œä½ åªè¦å…ˆè¨˜ä½ã€Œè‹±ä¿Šçš„ã€é€™å€‹æ„æ€å°±å¥½å›‰ï¼' }},
            { id: 'new', word: 'new', type: 'adj.', type_full: 'å½¢å®¹è©', phonetic: '[nju]', chinese: 'æ–°çš„', usage: 'ç”¨ä¾†å½¢å®¹äººã€äº‹ã€ç‰©æ˜¯æœ€è¿‘æ‰å‡ºç¾æˆ–å¾—åˆ°çš„ã€‚', collocations: ['a **new** classmate (ä¸€ä½æ–°åŒå­¸)', 'a **new** car (ä¸€è¼›æ–°è»Š)'], sentences: ["That's Zac, our **new** classmate.", 'I got a **new** bike for my birthday.'], confusion: { title: 'news', text: '[njuz] (n.) æ–°èï¼›æ¶ˆæ¯ã€‚`new` æ˜¯å½¢å®¹è©ã€Œæ–°çš„ã€ï¼Œå¾Œé¢åŠ ä¸Š `s` è®Šæˆ `news`ï¼Œå°±æˆäº†åè©ã€Œæ–°èã€ï¼ŒæŒ‡çš„æ˜¯ã€Œæ–°çš„æ¶ˆæ¯ã€ã€‚è¦ç‰¹åˆ¥æ³¨æ„ï¼Œ`news` æ˜¯**ä¸å¯æ•¸åè©**å–”ï¼' }, extra: { title: 'å»¶ä¼¸è£œå……', text: `"What's new?" æ˜¯ä¸€å¥å¾ˆå¸¸è¦‹çš„å£èªå•å€™ï¼Œæ„æ€é¡ä¼¼æ–¼ã€Œæœ€è¿‘æ€éº¼æ¨£å•Šï¼Ÿæœ‰ä»€éº¼æ–°é®®äº‹å—ï¼Ÿã€` }},
            { id: 'young', word: 'young', type: 'adj.', type_full: 'å½¢å®¹è©', phonetic: '[jÊŒÅ‹]', chinese: 'å¹´è¼•çš„', usage: 'å½¢å®¹å¹´ç´€å°æˆ–è™•æ–¼ç”Ÿå‘½æ—©æœŸéšæ®µã€‚å®ƒçš„ç›¸åè©æ˜¯ `old` (å¹´è€çš„)ã€‚', collocations: ['a **young** woman (ä¸€ä½å¹´è¼•çš„å¥³å£«)', 'look **young** (çœ‹èµ·ä¾†å¾ˆå¹´è¼•)'], sentences: ['Who is the **young** woman in the car?', 'My grandmother is 70, but she looks very **young**.'], confusion: { title: 'youth', text: '[juÎ¸] (n.) é’æ˜¥ï¼›å¹´è¼•äººã€‚`young` æ˜¯å½¢å®¹è©ï¼Œè€Œ `youth` æ˜¯åè©ï¼ŒæŒ‡çš„æ˜¯ã€Œé’æ˜¥æ™‚æœŸã€æˆ–ã€Œå¹´è¼•äººã€é€™å€‹ç¾¤é«”ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '"The young" å¯ä»¥ç”¨ä¾†æ³›æŒ‡ã€Œå¹´è¼•äººã€é€™å€‹ç¾¤é«”ï¼Œä¾‹å¦‚ï¼šThe future belongs to **the young**. (æœªä¾†å±¬æ–¼å¹´è¼•äººã€‚)' }},
            { id: 'beautiful', word: 'beautiful', type: 'adj.', type_full: 'å½¢å®¹è©', phonetic: '[`bjutÉ™fÉ™l]', chinese: 'ç¾éº—çš„', usage: 'é€šå¸¸ç”¨ä¾†**å½¢å®¹å¥³æ€§ã€ç‰©å“ã€é¢¨æ™¯ç­‰**ï¼Œè¡¨ç¤ºéå¸¸æ¼‚äº®ã€ä»¤äººæ„‰æ‚…ã€‚å½¢å®¹ç”·æ€§æ™‚å¤šç”¨ `handsome`ã€‚', collocations: ['a **beautiful** girl (ä¸€å€‹æ¼‚äº®çš„å¥³å­©)', 'a **beautiful** picture (ä¸€å¹…ç¾éº—çš„åœ–ç•«)'], sentences: ["Zac's sister is **beautiful**, too.", 'The sunset over the ocean was **beautiful**.'], confusion: { title: 'pretty', text: '[`prÉªtÉª] (adj.) æ¼‚äº®çš„ã€‚`Beautiful` çš„ç¾éº—ç¨‹åº¦é€šå¸¸æ¯” `pretty` æ›´é«˜ã€æ›´æ·±åˆ»ã€‚`Pretty` æ¯”è¼ƒåå‘ã€Œå¯æ„›ã€ç§€æ°£ã€çš„å¥½çœ‹ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '`Beautiful` é€™å€‹å­—æ˜¯ç”±åè© `beauty` (ç¾éº—) åŠ ä¸Šå­—å°¾ `-ful` (å……æ»¿...) è®ŠåŒ–è€Œä¾†çš„ï¼Œå­—é¢æ„æ€å°±æ˜¯ã€Œå……æ»¿äº†ç¾ã€ã€‚' }},
            { id: 'dear', word: 'dear', type: 'adj.', type_full: 'å½¢å®¹è©', phonetic: '[dÉªr]', chinese: 'è¦ªæ„›çš„ï¼›çæ„›çš„', usage: 'ç”¨ä¾†è¡¨ç¤ºå–œæ„›ã€çè¦–ã€‚å¸¸ç”¨åœ¨ä¿¡ä»¶çš„é–‹é ­ï¼Œæˆ–æ˜¯å½¢å®¹è¦ªè¿‘çš„äººã€‚', collocations: ['my **dear** family (æˆ‘è¦ªæ„›çš„å®¶äºº)', '**Dear** John, (è¦ªæ„›çš„ç´„ç¿°ï¼Œ - ç”¨æ–¼ä¿¡ä»¶é–‹é ­)'], sentences: ['This is my **dear** family.', 'My grandparents are very **dear** to me.'], confusion: { title: 'deer', text: '[dÉªr] (n.) é¹¿ã€‚é€™å…©å€‹å­—ç™¼éŸ³å®Œå…¨ä¸€æ¨£ï¼æ˜¯å…¸å‹çš„åŒéŸ³ç•°ç¾©å­—ã€‚`Dear` John, I saw a **deer** in the forest. (è¦ªæ„›çš„ç´„ç¿°ï¼Œæˆ‘åœ¨æ£®æ—è£¡çœ‹åˆ°ä¸€é ­é¹¿ã€‚)' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '"Oh dear!" æ˜¯ä¸€å€‹å¸¸è¦‹çš„æ„Ÿå˜†èªï¼Œç”¨ä¾†è¡¨ç¤ºé©šè¨ã€æ²®å–ªæˆ–æ“”æ†‚ï¼Œé¡ä¼¼æ–¼ä¸­æ–‡çš„ã€Œå¤©å•Šï¼ã€ã€ã€Œå“å‘€ï¼ã€ã€‚' }},
            // C. Family Members
            { id: 'cousin', word: 'cousin', type: 'n.', type_full: 'åè©', phonetic: '[`kÊŒzn]', chinese: 'å ‚(è¡¨)å…„å¼Ÿå§Šå¦¹', usage: 'è‹±æ–‡ä¸­çš„ `cousin` ä¸åˆ†ç”·å¥³ï¼Œä¹Ÿä¸åˆ†æ˜¯çˆ¸çˆ¸é€™é‚Šçš„è¦ªæˆš (å ‚) é‚„æ˜¯åª½åª½é€™é‚Šçš„è¦ªæˆš (è¡¨)ã€‚å”ã€ä¼¯ã€å§‘ã€èˆ…ã€å§¨çš„å­©å­ï¼Œéƒ½æ˜¯ä½ çš„ `cousin`ã€‚', collocations: ['my favorite **cousin** (æˆ‘æœ€å–œæ„›çš„è¡¨å“¥)', 'visit my **cousins** (å»æ¢æœ›æˆ‘çš„è¡¨å…„å¼Ÿå§Šå¦¹)'], sentences: ["He's my **cousin**, Max.", 'I have three **cousins**, and we play together every summer.'], confusion: { title: 'customer', text: '[`kÊŒstÉ™mÉš] (n.) é¡§å®¢ã€‚æ‹¼å­—ä¸Šæœ‰äº›ç›¸ä¼¼ï¼Œä½†æ„æ€å®Œå…¨ä¸åŒã€‚`Cousin` æ˜¯å®¶äººï¼Œ`customer` æ˜¯ä¾†è²·æ±è¥¿çš„äººã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: 'å¦‚æœæƒ³ç‰¹åˆ¥å¼·èª¿è¼©åˆ†é—œä¿‚ï¼Œå¯ä»¥èªª "first cousin" (ä¸€ä»£å ‚/è¡¨è¦ª) æˆ– "second cousin" (äºŒä»£å ‚/è¡¨è¦ª)ï¼Œä¸éæ—¥å¸¸ç”Ÿæ´»ä¸­ç›´æ¥èªª `cousin` å°±è¶³å¤ äº†ã€‚' }},
            { id: 'family', word: 'family', type: 'n.', type_full: 'åè©', phonetic: '[`fÃ¦mÉ™lÉª]', chinese: 'å®¶åº­ï¼›å®¶äºº', usage: 'æŒ‡ç”±è¡€ç·£ã€å©šå§»ç­‰é—œä¿‚çµ„æˆçš„è¦ªäººåœ˜é«”ã€‚', collocations: ['a happy **family** (ä¸€å€‹å¿«æ¨‚çš„å®¶åº­)', '**family** tree (å®¶æ—æ¨¹)'], sentences: ['We are a **family** of five.', 'My **family** is very **dear** to me.'], confusion: { title: 'familiar', text: '[fÉ™`mÉªljÉš] (adj.) ç†Ÿæ‚‰çš„ã€‚`Family` æ˜¯ä½ æœ€ `familiar` çš„ä¸€ç¾¤äººã€‚é€™å…©å€‹å­—æºè‡ªåŒä¸€å€‹æ‹‰ä¸å­— `familia`ã€‚' }, extra: { title: 'å»¶ä¼¸è£œå……', text: '`Family` é€™å€‹å­—åœ¨ä¸åŒæƒ…å¢ƒä¸‹ï¼Œå–®è¤‡æ•¸å‹•è©çš„ç”¨æ³•æœƒä¸åŒã€‚ç•¶ä½œã€Œä¸€å€‹æ•´é«”ã€æ™‚ï¼Œç”¨å–®æ•¸å‹•è© (My family **is** large.)ï¼›ç•¶å¼·èª¿ã€Œæ‰€æœ‰æˆå“¡ã€æ™‚ï¼Œåœ¨è‹±å¼è‹±èªä¸­å¯ç”¨è¤‡æ•¸å‹•è© (My family **are** all tall.)ã€‚' }},
        ];

        const flashcardsContainer = document.getElementById('flashcards-container');

        // Helper to format text with highlights
        function formatText(text) {
            return text.replace(/\*\*(.*?)\*\*/g, '<span class="highlight">$1</span>');
        }

        // Generate Flashcards
        vocabularyData.forEach(item => {
            const isAdj = item.type === 'adj.';
            const cardHTML = `
                <div class="card-container" role="button" tabindex="0" aria-label="ç¿»è½‰ ${item.word} å¡ç‰‡">
                    <div class="card">
                        <div class="card-face card-front ${isAdj ? 'adj' : ''}">${item.word}</div>
                        <div class="card-face card-back">
                            <div class="card-back-header">
                                <h4>${item.word}</h4>
                                <span class="tag ${isAdj ? 'tag-adj' : 'tag-n'}">${item.type} ${item.type_full}</span>
                            </div>
                            <div class="card-back-item">
                                <strong>ä¸­æ–‡æ„æ€</strong>
                                ${item.chinese}
                            </div>
                            <div class="card-back-item">
                                <strong>éŸ³æ¨™</strong>
                                ${item.phonetic}
                                <button class="speaker-btn" data-word="${item.word}" aria-label="æ’­æ”¾ ${item.word} ç™¼éŸ³">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-1.414 1.414A6.472 6.472 0 0 1 12.026 8a6.472 6.472 0 0 1-1.904 4.596l1.414 1.414z"/>
                                        <path d="M10.121 12.596A6.48 6.48 0 0 0 12.026 8a6.48 6.48 0 0 0-1.905-4.596l-1.414 1.414A4.486 4.486 0 0 1 10.026 8a4.486 4.486 0 0 1-1.319 3.182l1.414 1.414z"/>
                                        <path d="M8.707 11.182A4.486 4.486 0 0 0 10.026 8a4.486 4.486 0 0 0-1.319-3.182L7.293 6.232A2.488 2.488 0 0 1 8.026 8a2.488 2.488 0 0 1-.732 1.768l1.414 1.414zM6.5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5h-1z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="card-back-item"><strong>é‡è¦ç”¨æ³•</strong> ${formatText(item.usage)}</div>
                            <div class="card-back-item">
                                <strong>æ­é…è©èª</strong>
                                <ul>${item.collocations.map(c => `<li>${formatText(c)}</li>`).join('')}</ul>
                            </div>
                            <div class="card-back-item">
                                <strong>ä¾‹å¥</strong>
                                <ol>${item.sentences.map(s => `<li>${formatText(s)}</li>`).join('')}</ol>
                            </div>
                            ${item.confusion ? `
                                <div class="card-back-item accordion">
                                    <button class="accordion-toggle" aria-expanded="false">âš ï¸ æ˜“æ··æ·†å­—å½™: ${item.confusion.title}</button>
                                    <div class="accordion-content">
                                        <div><div class="accordion-inner-content">${formatText(item.confusion.text)}</div></div>
                                    </div>
                                </div>
                            ` : ''}
                             ${item.extra ? `
                                <div class="card-back-item accordion">
                                    <button class="accordion-toggle" aria-expanded="false">ğŸ’¡ å»¶ä¼¸è£œå……</button>
                                    <div class="accordion-content">
                                        <div><div class="accordion-inner-content">${formatText(item.extra.text)}</div></div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>`;
            flashcardsContainer.innerHTML += cardHTML;
        });

        // Add event listeners to dynamically created elements
        flashcardsContainer.addEventListener('click', function(e) {
            const cardContainer = e.target.closest('.card-container');
            if (!cardContainer) return;

            // Handle speaker button
            if (e.target.closest('.speaker-btn')) {
                e.stopPropagation();
                const btn = e.target.closest('.speaker-btn');
                const wordToSpeak = btn.dataset.word;
                const utterance = new SpeechSynthesisUtterance(wordToSpeak);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
                return;
            }
            
            // Handle accordion toggle
            if(e.target.closest('.accordion-toggle')) {
                e.stopPropagation();
                const toggle = e.target.closest('.accordion-toggle');
                const content = toggle.nextElementSibling;
                toggle.classList.toggle('active');
                content.classList.toggle('active');
                toggle.setAttribute('aria-expanded', toggle.classList.contains('active'));
                return;
            }

            // Handle card flip
            cardContainer.classList.toggle('is-flipped');
        });
        
        flashcardsContainer.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                const cardContainer = e.target.closest('.card-container');
                if (cardContainer && document.activeElement === cardContainer) {
                    e.preventDefault();
                    cardContainer.classList.toggle('is-flipped');
                }
            }
        });


        // --- Drag and Drop Exercise ---
        const wordBank = document.getElementById('word-bank');
        const dropZones = document.querySelectorAll('.drop-zone');
        const checkDragDropBtn = document.getElementById('check-drag-drop');
        const resetDragDropBtn = document.getElementById('reset-drag-drop');
        const dragDropWords = ['family', 'handsome', 'office worker', 'cousin', 'classmate'];

        function initDragDrop() {
            wordBank.innerHTML = '';
            dragDropWords.forEach(word => {
                const wordEl = document.createElement('div');
                wordEl.classList.add('draggable-word');
                wordEl.textContent = word;
                wordEl.draggable = true;
                wordEl.id = `drag-${word.replace(' ', '-')}`;
                wordBank.appendChild(wordEl);
            });
            
            dropZones.forEach(zone => {
                zone.innerHTML = '';
                zone.classList.remove('correct', 'incorrect');
            });

            addDragDropListeners();
        }

        function addDragDropListeners() {
            const draggables = document.querySelectorAll('.draggable-word');
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('dragging');
                });
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    const draggingEl = document.querySelector('.dragging');
                    if (draggingEl) {
                        // If drop zone already has a word, move it back to the bank
                        if(zone.firstChild){
                            wordBank.appendChild(zone.firstChild);
                        }
                        zone.appendChild(draggingEl);
                    }
                });
            });
        }
        
        checkDragDropBtn.addEventListener('click', () => {
            dropZones.forEach(zone => {
                const droppedWord = zone.querySelector('.draggable-word');
                if (droppedWord) {
                    if (droppedWord.textContent === zone.dataset.answer) {
                        zone.classList.add('correct');
                        zone.classList.remove('incorrect');
                    } else {
                        zone.classList.add('incorrect');
                        zone.classList.remove('correct');
                    }
                } else {
                    zone.classList.remove('correct', 'incorrect');
                }
            });
        });

        resetDragDropBtn.addEventListener('click', initDragDrop);
        
        initDragDrop();


        // --- Matching Game ---
        const matchWordsContainer = document.getElementById('match-words');
        const matchDefsContainer = document.getElementById('match-defs');
        const matchFeedback = document.getElementById('match-feedback');
        let selectedWordEl = null;
        let matchedPairs = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initMatchingGame() {
            matchWordsContainer.innerHTML = '';
            matchDefsContainer.innerHTML = '';
            selectedWordEl = null;
            matchedPairs = 0;
            matchFeedback.textContent = '';
            
            const words = shuffleArray([...vocabularyData]);
            const defs = shuffleArray([...vocabularyData]);

            words.forEach(item => {
                const el = document.createElement('div');
                el.classList.add('match-item', 'word');
                el.dataset.id = item.id;
                el.textContent = item.word;
                matchWordsContainer.appendChild(el);
            });

            defs.forEach(item => {
                const el = document.createElement('div');
                el.classList.add('match-item', 'definition');
                el.dataset.id = item.id;
                el.textContent = item.chinese;
                matchDefsContainer.appendChild(el);
            });
        }
        
        document.getElementById('matching-game').addEventListener('click', e => {
            const target = e.target;
            if (!target.classList.contains('match-item') || target.classList.contains('matched')) {
                return;
            }

            if (target.classList.contains('word')) {
                if(selectedWordEl) {
                    selectedWordEl.classList.remove('selected');
                }
                selectedWordEl = target;
                selectedWordEl.classList.add('selected');
            } else if (target.classList.contains('definition')) {
                if (!selectedWordEl) {
                    return; // Must select a word first
                }

                if (selectedWordEl.dataset.id === target.dataset.id) {
                    // Correct match
                    selectedWordEl.classList.add('matched');
                    target.classList.add('matched');
                    selectedWordEl.classList.remove('selected');
                    selectedWordEl = null;
                    matchedPairs++;
                    if (matchedPairs === vocabularyData.length) {
                        matchFeedback.textContent = 'æ­å–œï¼ä½ å·²å®Œæˆæ‰€æœ‰é…å°ï¼';
                        matchFeedback.style.color = 'var(--correct-color)';
                    }
                } else {
                    // Incorrect match
                    target.classList.add('incorrect-flash');
                    selectedWordEl.classList.remove('selected');
                    selectedWordEl = null;
                    setTimeout(() => target.classList.remove('incorrect-flash'), 500);
                }
            }
        });

        initMatchingGame();
    });
    </script>
</body>
</html>
